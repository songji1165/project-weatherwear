# project-weather-wear

#### 1. 프로젝트 시작

아직 코딩하는게 많이 미숙하지만, 그동안 배운 것을 응용해보고 싶었고 뭔가 만들 볼 수는 있겠다는 자신감이 생겨서 프로젝트를 시작해보았다.
들쑥날쑥한 날씨때문에 밖에 나가기 전에 항상 옷을 어떻게 입어야하나 고민을 하곤 했다. 그래서 기온별로 옷차림에 대해 알려주는 앱이나 웹페이지 등이 있으면 좋겠다는 생각을 했다.
이 프로젝트는 앱으로 만드는 것이 좀더 적합할 수도 있지만, 그동안 내가 배운 것들을 활용하기 위해 우선은, 웹 페이지로 제작하려 한다.

#### 2. 프로젝트 완성

- [songji1165@github.ioproject-weatherwear/](https://songji1165.github.io/project-weatherwear/)

<img src="./src/assets/WW중간점검.gif" width="300">

- 아쉬운 점
  - 처음 기획한대로 완벽히 완성하지는 못했다. 중간에 계속 수정사항이 생겼고, 원래 기획했던대로 하기에 혼자서는 시간이 너무 오래 걸릴 것 같았다. 사이드 프로젝트이기 때문에 욕심을 조금 버리고 좀 더 심플하게 구성하여 완성하게 되었다.
    그리고 제주도, 부산의 최저 최고 기온이 계속 같은 기온으로 나와서 코드가 잘못된 건가 확인해보았으나, 원래 제공해주는 open weather API 데이터 자체가 해당 지역에서 최저 최고 기온이 같은 기온으로 나왔다. 해외에서 제공되는 거라 그런지 우리나라의 기온 데이터가 조금 오류가 있는 듯하다. 다음번에 날씨 api를 사용해야 할 때는 다른 api를 찾아보아야 겠다.

---

## 프로젝트 일지

### 0502 ~ 0503

- 프로젝트 기획과 디자인을 하였다.
- 기획은 트렐로를 통해 요구사항, 기능정리, 기본 flow 등을 정리하였다.
- 디자인에 있어서는 최대한 심플하게 하였다.

### 0503 ~ 0504

- html을 이용하여 전체적인 큰 틀정도로만 레이아웃을 잡아보았다.
- Vue Cli를 설치 후 본격 페이지별로 파일을 구성해보았다. 컴포넌트로 세세하게 나누기 전에 App.vue안에서만 레이아웃을 구성해보고 css도 입혀보았다. 하지만, 시간소비만 크고 효율적이지 못한 느낌이 계속 들었다.
- 큼직한 틀은 잡혔으니 내일부터는 본격적으로 컴포넌트 분리를 하며 컴포넌트별로 집중해서 만들어 보아야겠다.

### 0505 ~ 0506

- 페이지별로, 페이지 내에서도 단위별로 나누고 기능 플로우에 맞쳐 라우팅도 적용해보았다. 레이아웃만 일일이 잡고 있었을 때보다 좀더 작은 단위로 나누고 전체적인 큰 그림을 생각하며 접근하니 확실히 진도가 전보다는 빨라진 느낌이다.
- 기능 플로우에 맞쳐 라우팅을 적용하고, 해당 컴포넌트 내에서 필요한 모듈을 조금씩 구현해보며 점점 기획과는 다르게 나아가는 것 같았다. 하지만 부정적이지만은 않다고 생각한다. 생각하지 못했던 세세한 부분들이 추가되었고 필요치 않은 것은 삭제하며, 좀 더 깔끔해지고 있는 것 같다. 물론, 알림기능이나 미세먼지api 추가 등 필요한 기능들을 삭제해야 하는 것도 있었다. 개인 프로젝트기때문에 완벽보다는 완성이 더 우선순위라 생각하였고, 중복적일 수 있는 기능들은 삭제하고 앱이 아닌 웹에 포커스를 맞쳐 만들어 가야겠다.

### 0507

- http통신에서 많은 시간 애를 먹었다. 예전에 연습했던 것들을 다시 보며 수정, 보완을 하며 해결은 했으나 추후에 다시 이론 공부를 해야 겠다.

### 0508

- 이 프로젝트에서 가장 중요한, 비교 데이터가 여러가지 필요했다. api 호출 후 데이터를 비교할 수 있도록 json파일로 기준 데이터들을 정리하였다.
- 자바스크립트도 공통적으로 쓰일 수 있는 기능들이 많았기 때문에 모듈파일에 기능별로 정리하였다.
- 컴포넌트 파일 내에서도 가독성을 높이기 위해, 컴포넌트 단위를 좀더 나눌 수 있는지 생각해보았다. date함수는 moment라이브러리를 사용해서 깔끔하게 정리하였다.
- 아직 컴포넌트별로 쪼개는 것, es6 활용하는것과 자바스크립트 모듈화하는게 익숙치 않다. 계속 수정해가며 코드를 최대한 깔끔하게하고 가독성을 높여 수정이 용이하게 하는 등의 노력을 해야겠다.

### 0509~0510

- axios, fetch, async를 그냥 넘기기엔 이 프로젝트에 주가 되는 것들이기 때문에 안 짚고 넘어갈 수가 없었다. 이틀동안 열심히 삽질한 결과 이제 어느정도 쓸 수 있게 된 것 같다.
  생활코딩을 통해 http통신에 대해 다시 한번 이론을 되짚어보았다.
  강의 중 지금은 이해 안 갈수 있다고 이런게 있다고만 넘기고 필요할 때 다시 보면 이해가 갈거라는 말이 너무 와닿았다. 예전에는 귀에 들어오지도 않던 내용들이 다시 보니 이해가 되었다. 지금도 완전히 이해하진 못했지만 나중에 다시 찾아보면 그땐 훨씬 잘 이해 될거라 생각한다.

### 0512

- weather API에서 지원하는 지역이름이 정확하지 않았다. 그래서 현재 좌표값으로 weatherAPI를 응답받게될시 지역이름을 새로 생성해주어야 했다.
  이는 google geocoder API로 해결할 수 있었다. geoCoder API는 주소를 좌푯값으로 바꿔주고, 역 geoCoder는 반대로 좌표값을 주소로 바꿔준다.

```js
// api/index.js
 export const getLocalName = (lat, lon) => {
  return axios
    .get(
      `https://maps.googleapis.com/maps/api/geocode/json?latlng=${lat},${lon}&key=${VUE_APP_GEOCODING_APP_KEY}`
    )
    .then(res => res.data)
    .catch(err => console.log(err));
};


// components/Today.vue
  async requestLocalName(lat, lon) {
        const responseLocalName = await getLocalName(lat, lon);
        const localNameArr = responseLocalName.results[3].formatted_address.split(
          " "
        );
        console.log(localNameArr);
        this.selectTitle = localNameArr[2];
      }
```

- google API가 "OVER_QUERY_LIMIT"가 떴다.. 내가 구성한 로직이 잘못된 것은 아닐가 단일로 통신을 테스트해보았다. 하지만 계속 에러가 났다.
  알고보니 google API가 유료로 변경됬다고 한다. 다른 geoCoder API를 찾아봐야할 것 같다.
- API 통신에 있어 API Key값은 인증하기 위한 고유의 비밀번호이므로 보안이 중요하다. dotenv(환경변수)를 이용해서 보안을 해주었다. vue cli3부터는 자체에 dotenv가 포함되어 있어 다른 설치없이 사용할 수 있었다.
  > 1.  .env 파일 생성
  > 2.  "VUE*APP*"접두사로 환경변수 지정
  > 3.  process.env.\* 로 액세스 할 수 있다.

### 0513

- googleAPI를 kakao API로 대체해주었다. google과는 사용법이 달라 사용법을 익히는데에도 애를 먹었다. 나의 목적에 맞는 api는 rest api였다. google api는 url안에 키값만 넣으면 간단하게 사용할 수 있었으나 kakao의 rest api 요청문을 ajax형식으로 바꿔서 사용하는 것이 꽤 어려웠다. 그래도 덕분에 한 번 해보고 나니 생각보다 간단한 문제였다는 것을 알게 되었다.

  > fetch에 두번째 인자로 초기값을 설정해주기.
  > curl -v -X GET "https://dapi.kakao.com/v2/local/geo/coord2regioncode.json?x=127.1086228&y=37.4012191" \ -H "Authorization: KakaoAK kkkkkkkkkkkkkkkkkkkkkkkkkkkkkkkk"

  > {method : "GET", headers : `KakaoAK ${key}`}

- 최고, 최저 기온 컴포넌트를 추가하기 위해 컴포넌트들을 전부 수정해주었다. 그래도 이전에 컴포넌트별로 잘 분리해 놓아서 여기저기 수정하는 것이 크게 어렵지 않았다.
- 슬라이드를 추가했다. **'javascript30'**을 참고해서 mouse-drag 슬라이드를 구현해보았다. 좀 더 수정이 필요하긴 하다.
- 굵직한 컴포넌트 하나를 끝내는데만 거의 이주가 걸렸다. 이 컴포넌트가 프로젝트의 70-80% 정도를 차지하는 부분이긴 하다. 이번 프로젝트는 사이드 프로젝트이기 때문에 욕심을 좀 버리고 중복되는 기능들을 최대한 줄여서 빠른 시일내에 끝낼 수 있도록 해야겠다.

## 0514 ~ 0516

- css 수정하는 단계에서 css부분은 신경을 많이 못 썻구나라는 걸 많이 느꼇다. 클래스명을 더 명확하게 만들고 style부분은 좀더 깔끔하게 정리를 해야 했다. 이전에 less를 조금 사용해본 적이 있었다. 확실히 less를 사용하면 더욱 직관적이고 깔끔하게 작성할 수 있었다. 이번 style부분을 정리하며 less나 scss의 필요성을 더욱 알게 되었다.
- api 호출과 비동기처리에 있어 생각지 못한 버그들이 계속 생겨서 이러한 부분을 계속 수정해주어야 했다. 위치승인 거절 시 리로딩 버튼을 눌렀을 때, 인터넷연결이 없을 때 등 다양한 경우의 수가 있었다. 최대한 수정은 했는데 또 생각지 못한 버그가 있을 수 있을 것 같다.

## 0517 ~ 0518

- 슬라이드 부분을 vue 이벤트 핸들링으로 변경해 주고, DOM 접근은 queruSelect 대시 \$refs를 사용해주었다.
- lint를 이용해서 구문 오류를 추적하고 수정해주고, 필요없는 주석 들을 정리했다.
- github pages로 프로젝트를 배포하였다.
  이 과정 또한 많은 어려움이 있었다.
  github 레포에 소스코드가 변경되기도 하였고, 파일들이 날라가기도 하였다. 다시 한번 버전관리에 중요성을 크게 느낄 수 있었다.. 또한 알 수 없는 오류들이 자꾸 떠서 netlify 서비스를 통해 좀 더 편하게 배포를 하였다.
  하지만, netlify는 도메인이 랜덤하게 설정되었고 도메인 수정은 유료여서 다시 github pages로 배포를 해보았다.
  역시 배포 과정에서 계속 오류가 떴고, 구글링을 통해 조금씩 수정하며 github page에 성공하게 되었다 !
